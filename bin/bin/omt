#!/bin/bash
TERMINAL="alacritty"

if [ $# -lt 1 ] || [ $# -gt 2 ]; then
    echo "Usage: $0 <number_of_terminals> [directory]"
    exit 1
fi

if ! [[ "$1" =~ ^[0-9]+$ ]] || [ "$1" -lt 1 ]; then
    echo "Error: Please provide a positive number"
    exit 1
fi

if [ -n "$2" ] && [ ! -d "$2" ]; then
    echo "Error: Directory '$2' does not exist"
    exit 1
fi

DIR_ARGS=""
if [ -n "$2" ]; then
    DIR_ARGS="--working-directory $2"
fi

for i in $(seq 1 "$1"); do
    $TERMINAL $DIR_ARGS &
done
